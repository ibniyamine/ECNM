/*! 21.0.8.0 */
/*! VersionVI: 01F250052j x */
var WDSaisie=function(){"use strict";function n(n,t,i,r,u){if(arguments.length){WDChamp.prototype.constructor.apply(this,arguments);var f=u[0],e=u[1],o=u[2];this.m_sIndication=f+"";this.m_sAliasChampCalendrier=e;this.m_sFormatAffichage=o;this.m_oObjetChampCalendrier=null;this.m_bDepuisOnChange=!1;this.m_bChangeDepuisCalendrier=!1}}var r=!bIE||10<=nIE&&(!bIEQuirks||6<=document.documentMode),t,i;return n.prototype=new WDChamp,n.prototype.constructor=n,n.prototype.Init=function(){WDChamp.prototype.Init.apply(this,arguments);this.RAZIndication()},n.prototype._vLiaisonHTML=function(){WDChamp.prototype._vLiaisonHTML.apply(this,arguments);this.m_sAliasChampCalendrier&&(this.m_oObjetChampCalendrier=clWDUtil.m_oChamps.oGetChampDirect(this.m_sAliasChampCalendrier))},n.prototype.__tabGetChamps=function(){if(this.bGestionTableZR()){var n=[];return this.PourToutesLignesTableZR(function(t,i){n[t-i]=document.getElementsByName("zrl_"+t+"_"+this.m_sAliasChamp)[0]},this.nGetTableZRDebut()),n}return document.getElementsByName(this.m_sAliasChamp)},n.prototype.RAZIndication=function(){""!=this.m_sIndication&&clWDUtil.bForEachThis(this.__tabGetChamps(),this,function(n){return n&&n.value!==undefined&&this.__PlaceIndication(n,!0),!0})},n.prototype.GetProp=function(n){switch(n){case this.XML_CHAMP_PROP_NUM_INDICATION:return this.m_sIndication;default:return WDChamp.prototype.GetProp.apply(this,arguments)}},n.prototype.SetProp=function(n,t,i,u,f){var e,o;i=WDChamp.prototype.SetProp.apply(this,arguments);switch(n){case this.XML_CHAMP_PROP_NUM_INDICATION:return o=this.__tabGetChamps(),r||clWDUtil.bForEachThis(o,this,function(n){return n&&(n.blur(),this.OnFocus(null,n)),!0}),this.m_sIndication=i+"",clWDUtil.bForEachThis(o,this,function(n){return n&&this.__PlaceIndication(n,!1),!0}),i;case this.XML_CHAMP_PROP_NUM_BOUTONCALENDRIER:return e=u.nextSibling,clWDUtil.bBaliseEstTag(e,"div")&&clWDUtil.SetDisplay(e,i),i;case this.XML_CHAMP_PROP_NUM_ETAT:return e=u.nextSibling,clWDUtil.bBaliseEstTag(e,"div")&&clWDAJAXMain._AppliqueAttributEtat(f,e.firstChild,i,!0),i;default:return i}},n.prototype.MAJContenuCalendrier=function(n,t){var r=this.GetValeur(n,t.value,t),i;i=""!=r?clWDUtil.sChaineVersDate(t.value,this.m_sFormatAffichage):"";this.m_oObjetChampCalendrier.OnChangeSaisie(n,i,t)},n.prototype.OnChange=function(n,t,i){if(!this.m_bChangeDepuisCalendrier){!t&&n&&(t=clWDUtil.oGetTarget(n));try{var r=this.m_bDepuisOnChange;this.m_bDepuisOnChange=i;this.MAJContenuCalendrier(n,t)}finally{this.m_bDepuisOnChange=r}}},n.prototype.OnChangeCalendrier=function(n,t,i){var r,u;if(this.bGestionTableZR()&&(r=document.getElementsByName(i.name),r.length==1&&(i=r[0],window.WDTableZRNavigateur&&this.oGetTableZRParent()instanceof WDTableZRNavigateur&&(n=n?clWDUtil.oCloneObjet(n):{},n.target=i))),t=clWDUtil.sDateVersChaine(t,this.m_sFormatAffichage),t=this.SetValeur(n,t,i),i.value=t,!this.m_bDepuisOnChange)try{u=this.m_bChangeDepuisCalendrier;this.m_bChangeDepuisCalendrier=!0;i.onchange(n)}finally{this.m_bChangeDepuisCalendrier=u}},r?(n.prototype.GetValeur=function(n,t){return t},n.prototype.SetValeur=function(n,t){return WDChamp.prototype.SetValeur.apply(this,arguments),t},n.prototype.OnFocus=clWDUtil.m_pfVide,n.prototype.OnBlur=clWDUtil.m_pfVide,n.prototype.__PlaceIndication=function(n){n.placeholder=this.m_sIndication}):(t="#808080",i="italic",n.prototype.GetValeur=function(n,t,i){return""!=this.m_sIndication&&i.bIndication?"":t},n.prototype.SetValeur=function(n,t,i){if(WDChamp.prototype.SetValeur.apply(this,arguments),""!=this.m_sIndication){if(t.length==0)return i.bIndication||this.__SetStyle(i),this.m_sIndication;i.bIndication&&this.__ClearStyle(i)}return t},n.prototype.OnFocus=function(n,t){if(""!=this.m_sIndication&&(n&&!t&&(t=clWDUtil.oGetTarget(n)),t.bIndication&&(this.__ClearStyle(t),t.value="",bIE&&t.createTextRange))){var i=t.createTextRange();i.collapse(!0);i.moveStart("character",0);i.moveEnd("character",0);i.select();t.focus()}},n.prototype.OnBlur=function(n,t){""!=this.m_sIndication&&(n&&!t&&(t=clWDUtil.oGetTarget(n)),this.__PlaceIndication(t,!1))},n.prototype.OnSubmit=function(){WDChamp.prototype.OnSubmit.apply(this,arguments);""!=this.m_sIndication&&clWDUtil.bForEachThis(this.__tabGetChamps(),this,function(n){return n&&n.bIndication&&(this.__ClearStyle(n),n.value=""),!0})},n.prototype.__PlaceIndication=function(n,t){n.value.length==0&&(t&&n.blur(),n.value.length==0&&(this.__SetStyle(n),n.value=this.m_sIndication))},n.prototype.__SetStyle=function(n){var r=clWDUtil.oGetCurrentStyle(n);n.sIndicationColor=r.color;n.sIndicationFontStyle=r.fontStyle;n.style.color=t;n.style.fontStyle=i;n.bIndication=!0},n.prototype.__ClearStyle=function(n){var r=clWDUtil.oGetCurrentStyle(n);r.color==t&&n.sIndicationColor!==undefined&&(n.style.color=n.sIndicationColor,n.sIndicationColor=undefined);r.fontStyle==i&&n.sIndicationFontStyle!==undefined&&(n.style.fontStyle=n.sIndicationFontStyle,n.sIndicationFontStyle=undefined);n.bIndication!==undefined&&(n.bIndication=!1)}),n}()